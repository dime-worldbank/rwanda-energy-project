## PURPOSE      High-frequency checks for screening
## AUTHOR  Xiaoming Zhang
## LAST UPDATE  June 17th 2025
#######################################################################################################
# remove objects
rm(list=ls())
hfc_code_filepath <- "C:/Users/wb614406/OneDrive - WBG/Documents/GitHub/rwanda-energy-project/RCT_data/baseline/Screening/scripts/"
## 4. Run R Scripts ----
source(paste0(hfc_code_filepath,   "1.screening_constr.R"))
#######################################################################################################
# remove objects
rm(list=ls())
hfc_code_filepath <- "C:/Users/wb614406/OneDrive - WBG/Documents/GitHub/rwanda-energy-project/RCT_data/baseline/Screening/"
## 4. Run R Scripts ----
source(paste0(hfc_code_filepath,   "1.screening_constr.R"))
source(paste0(hfc_code_filepath,   "1.screening_constr.R"))
print("Script 1 Done.")
source(paste0(hfc_code_filepath,   "2.screening_admin.R"))
print("Script 2 Done.")
source(paste0(hfc_code_filepath,   "3.screening_enum.R"))
print("Script 3 Done.")
source(paste0(hfc_code_filepath,   "4.backcheck.R"))
print("Script 4 Done.")
household_head <- read.csv(file.path(data_path, "household_head_baseline2024.csv"))
household_head <- household_head %>%
filter(
nid %in% deployment_households$nid
)
View(deployment_households)
View(household_head)
household_head <- household_head %>%
filter(
nid %in% deployment_households$nid & last_name %in% deployment_households$last_name
)
household_head <- household_head %>%
filter(
nid %in% deployment_households$nid & last_name %in% deployment_households$last_name &
first_name %in% deployment_households$first_name
)
household_head <- household_head %>%
mutate(
check = paste0(nid, first_name, last_name)
)
household_head <- household_head %>%
mutate(
check = paste0(nid, first_name, last_name)
) %>%
distinct(
check
)
deployment_household_join <- deployment_household %>%
mutate(
check = paste0(nid, first_name, last_name)
) %>%
distinct(
check
)
deployment_household_join <- deployment_households %>%
mutate(
check = paste0(nid, first_name, last_name)
) %>%
distinct(
check
)
View(district_check)
deployment_household_join <- deployment_households %>%
mutate(
check = paste0(nid, first_name, last_name)
)
household_head_select <- household_head %>%
filter(
check %in% deployment_household_join$check
)
household_head <- read.csv(file.path(data_path, "household_head_baseline2024.csv"))
household_head <- household_head %>%
mutate(
check = paste0(nid, first_name, last_name)
) %>%
distinct(
check
)
check %in% deployment_household_join$check
household_head_select <- household_head %>%
filter(
check %in% deployment_household_join$check
)
household_head <- household_head %>%
filter(
hh_id %in% deployment_household_join$hh_id
)
household_head <- household_head %>%
filter(
hh_id %in% deployment_household_join$household_id
)
household_head <- read.csv(file.path(data_path, "household_head_baseline2024.csv"))
View(household_head)
household_head <- household_head %>%
filter(
household_id %in% deployment_household_join$household_id
)
write.csv(household_head,
file = file.path(data_path, "household_head.csv"),
row.names = FALSE,
na = "")
########################################################################################################
#                                                                                                      #
#                                  HIGH-FREQUENCY CHECKS  -- MAIN                                      #
#                                                                                                      #
########################################################################################################
## PURPOSE      High-frequency checks for screening
## AUTHOR  Xiaoming Zhang
## LAST UPDATE  June 17th 2025
#######################################################################################################
# remove objects
rm(list=ls())
hfc_code_filepath <- "C:/Users/wb614406/OneDrive - WBG/Documents/GitHub/rwanda-energy-project/RCT_data/baseline/Screening/"
## 4. Run R Scripts ----
source(paste0(hfc_code_filepath,   "1.screening_constr.R"))
########################################################################################################
#                                                                                                      #
#                                  HIGH-FREQUENCY CHECKS  -- MAIN                                      #
#                                                                                                      #
########################################################################################################
## PURPOSE      High-frequency checks for screening
## AUTHOR  Xiaoming Zhang
## LAST UPDATE  June 17th 2025
#######################################################################################################
# remove objects
rm(list=ls())
hfc_code_filepath <- "C:/Users/wb614406/OneDrive - WBG/Documents/GitHub/rwanda-energy-project/RCT_data/baseline/Screening/"
## 4. Run R Scripts ----
source(paste0(hfc_code_filepath,   "1.screening_constr.R"))
print("Script 1 Done.")
source(paste0(hfc_code_filepath,   "2.screening_admin.R"))
print("Script 2 Done.")
source(paste0(hfc_code_filepath,   "3.screening_enum.R"))
print("Script 3 Done.")
source(paste0(hfc_code_filepath,   "4.backcheck.R"))
print("Script 4 Done.")
View(not_in_deployment)
eligible_households <- screening_survey %>%
filter(status == "Eligible") %>%
select(
district, district_key, sector, sector_key, cell, cell_key, village, village_key, hh_id, phonenumber, second_phonenumber, submissiondate, startdate
)
hfc_sheet %>%
sheet_write(data = eligible_households, sheet = "Eligible households")
household_head <- household_head %>%
select(hh_id, first_name, last_name, nid)
household_head <- read.csv(file.path(data_path, "household_head_baseline2024.csv"))
household_head <- household_head %>%
select(hh_id, first_name, last_name, nid)
eligible_households <- left_join(eligible_households, household_head, by = c("hh_id" = "household_id")) %>%
select(
district, district_key, sector, sector_key, cell, cell_key, village, village_key, hh_id, phonenumber, second_phonenumber, submissiondate, startdate,
first_name, last_name, nid
)
eligible_households <- left_join(eligible_households, household_head, by = c("hh_id" = "household_id"))
View(eligible_households)
eligible_households <- screening_survey %>%
filter(status == "Eligible") %>%
select(
district, district_key, sector, sector_key, cell, cell_key, village, village_key, hh_id, phonenumber, second_phonenumber, submissiondate, startdate
)
View(screening_survey)
household_head <- read.csv(file.path(data_path, "household_head_baseline2024.csv"))
household_head <- household_head %>%
select(household_id, first_name, last_name, nid)
eligible_households <- left_join(eligible_households, household_head, by = c("hh_id" = "household_id"))
hfc_sheet %>%
sheet_write(data = eligible_households, sheet = "Eligible households")
