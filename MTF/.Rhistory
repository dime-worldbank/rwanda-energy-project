View(sectionF2)
fuel <- sectionF2 %>%
mutate(F11 = as_factor(F11)) %>%
group_by(F11)%>%
summarise(
n = n()
) %>%
arrange(desc(n))
View(fuel)
fuel <- sectionF2 %>%
mutate(F11 = as_factor(F11)) %>%
filter(F12 == 1) %>%
group_by(F11)%>%
summarise(
n = n()
) %>%
arrange(desc(n))
fuel <- sectionF2 %>%
mutate(F11 = as_factor(F11)) %>%
filter(F12 == 1) %>%
group_by(F11)%>%
summarise(
n = n()
) %>%
arrange(desc(n)) %>%
mutate(percentage = paste(round((n / 5706),4) * 100, "%"))
fuel_spending <- sectionF2 %>%
mutate(F11 = as_factor(F11),
F14 = as_factor(F14)) %>%
filter(F12 == 1) %>%
group_by(F11)%>%
summarise(
n = n()
) %>%
arrange(desc(n)) %>%
mutate(percentage = paste(round((n / 5706),4) * 100, "%"))
fuel_spending <- sectionF2 %>%
mutate(F11 = as_factor(F11),
F14 = as_factor(F14),
spending_month = F15*(30/F14) )
fuel_spending <- sectionF2 %>%
mutate(F11 = as_factor(F11),
spending_month = F15*(30/F14) )
View(fuel_spending)
fuel_spending <- sectionF2 %>%
mutate(
F11 = as_factor(F11),  # F11 = fuel type
F14 = as.numeric(F14), # ensure F14 is numeric (days between purchases)
F15 = as.numeric(F15), # spending per purchase
spending_month = ifelse(F14 > 0, F15 * (30 / F14), NA_real_)
) %>%
filter(F12 == 1) %>%  # filter for fuels used for lighting
group_by(F11) %>%
summarise(
n = n(),
mean_spending_month = round(mean(spending_month, na.rm = TRUE), 2)
) %>%
arrange(desc(n)) %>%
mutate(
percentage = paste0(round((n / 5706) * 100, 2), "%")
)
View(sectionI2J)
View(sectionI)
biomass_spendin <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%
mutate(I02 = as_factor(I02))
biomass_spendin <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%
mutate(I02 = as_factor(I02)) %>%
filter(I03 == 1) %>%
mutate(
total_amount = frequency to month * amount
biomass_spendin <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%
mutate(I02 = as_factor(I02)) %>%
filter(I03 == 1)
View(biomass_spendin)
table(biomass_spendin$I02)
biomass_spending <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%  # Select biomass fuels
mutate(
I02 = as_factor(I02),
frequency_month = case_when(
I14 == 1 ~ 30,
I14 == 2 ~ 4,
I14 == 3 ~ 8,
I14 == 4 ~ 1,
I14 == 7 ~ NA_real_,  # Optional: handle 'Other'
TRUE ~ NA_real_
)
) %>%
filter(I03 == 1) %>%  # Used for lighting
mutate(
total_amount = frequency_month * I15  # Replace I15 with your amount column
)
View(biomass_spending)
biomass_spending <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%  # Select biomass fuels
mutate(
I02 = as_factor(I02),
frequency_month = case_when(
I13 == 1 ~ 30,
I13 == 2 ~ 4,
I13 == 3 ~ 8,
I13 == 4 ~ 1,
I13 == 7 ~ NA_real_,  # Optional: handle 'Other'
TRUE ~ NA_real_
)
) %>%
filter(I03 == 1) %>%  # Used for lighting
mutate(
total_amount = frequency_month * I15  # Replace I15 with your amount column
)
biomass_spending <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%  # Select biomass fuels
mutate(
I02 = as_factor(I02),
frequency_month = case_when(
I13 == 1 ~ 30,
I13 == 2 ~ 4,
I13 == 3 ~ 8,
I13 == 4 ~ 1,
I13 == 7 ~ NA_real_,  # Optional: handle 'Other'
TRUE ~ NA_real_
)
) %>%
filter(I03 == 1) %>%  # Used for lighting
mutate(
total_amount = frequency_month * I16  # Replace I15 with your amount column
)
biomass_spending <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%  # Select biomass fuels
mutate(
I02 = as_factor(I02),
frequency_month = case_when(
I13 == 1 ~ 30,
I13 == 2 ~ 4,
I13 == 3 ~ 8,
I13 == 4 ~ 1,
I13 == 7 ~ NA_real_,  # Optional: handle 'Other'
TRUE ~ NA_real_
)
) %>%
filter(I03 == 1) %>%  # Used for lighting
mutate(
total_amount = frequency_month * I16  # Replace I15 with your amount column
) %>%
group_by(HHID) %>%
summarise(
total_amount = sum(total_amount, na.rm = TRUE)
)
summary(biomass_spending$total_amount)
278/5706
biomass_spending <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%  # Select biomass fuels
mutate(
I02 = as_factor(I02),
frequency_month = case_when(
I13 == 1 ~ 30,
I13 == 2 ~ 4,
I13 == 3 ~ 8,
I13 == 4 ~ 1,
I13 == 7 ~ NA_real_,  # Optional: handle 'Other'
TRUE ~ NA_real_
)
) %>%
filter(I03 == 1)   # Used for lighting
biomass_spending <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%  # Select biomass fuels
mutate(
I02 = as_factor(I02),
frequency_month = case_when(
I13 == 1 ~ 30,
I13 == 2 ~ 4,
I13 == 3 ~ 8,
I13 == 4 ~ 1,
I13 == 7 ~ NA_real_,  # Optional: handle 'Other'
TRUE ~ NA_real_
)
) %>%
filter(I03 == 1) %>%   # Used for lighting
mutate(
total_amount = frequency_month * I16  # Replace I15 with your amount column
) %>%
group_by(HHID) %>%
summarise(
total_amount = sum(total_amount, na.rm = TRUE)
)
View(sectionB)
lighting <- sectionB %>%
mutate(B02 = as_factor(B02)) %>%
group_by(B02) %>%
summarise(
n = n()
) %>%
arrange(desc(n)) %>%
mutate(percentage = paste(round((n / sum(n)),4) * 100, "%"))
View(lighting)
View(sectionG1)
cookstove_summary <- sectionGG1 %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G04 = as_factor(G04)) %>%  # Apply labels from .dta if read with haven
group_by(G04) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
cookstove_summary <- sectionGG1 %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G04 = as_factor(G04)) %>%  # Apply labels from .dta if read with haven
group_by(G04) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
cookstove_summary <- sectionG1 %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G04 = as_factor(G04)) %>%  # Apply labels from .dta if read with haven
group_by(G04) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
View(cookstove_summary)
View(sectionG1)
cookstove_summary <- sectionG1 %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G04 = as_factor(G04))  # Apply labels from .dta if read with haven
View(cookstove_summary)
cookstove_summary <- sectionG1 %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G03 = as_factor(G03))  # Apply labels from .dta if read with haven
cookstove_summary <- sectionG1 %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G03 = as_factor(G03)) %>%  # Apply labels from .dta if read with haven
group_by(G03) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
secondary_cookstove_summary <- sectionG1 %>%
filter(G26 != 1) %>%  # Only keep the main cookstove
mutate(G03 = as_factor(G03)) %>%  # Apply labels from .dta if read with haven
group_by(G03) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
View(secondary_cookstove_summary)
View(sectionI2J)
View(sectionKL)
View(sectionI)
View(sectionG2)
View(sectionI2J)
View(sectionKL)
# Summarize cooking time
cooking_time_summary <- sectionKL %>%
mutate(
women = K2A + K2B,
men   = K2C + K2D
) %>%
summarise(
women_mean   = round(mean(women, na.rm = TRUE), 2),
women_sd     = round(sd(women, na.rm = TRUE), 2),
women_min    = min(women, na.rm = TRUE),
women_max    = max(women, na.rm = TRUE),
women_median = median(women, na.rm = TRUE),
men_mean     = round(mean(men, na.rm = TRUE), 2),
men_sd       = round(sd(men, na.rm = TRUE), 2),
men_min      = min(men, na.rm = TRUE),
men_max      = max(men, na.rm = TRUE),
men_median   = median(men, na.rm = TRUE)
)
View(cooking_time_summary)
View(sectionD)
View(sectionA2)
business <- sectionA2 %>%
filter(HI04 == 2) %>%
group_by(A26A) %>%
summarise(yes)
pacman::p_load(tidyverse, dplyr, here, sf,
stringr, haven, lmtest, fixest, kableExtra,
ggplot2, readxl, writexl, janitor, randomizr,
stargazer, modelsummary, googlesheets4)
getwd()
# Import Data ----
dropbox <- 'C:/Users/wb614406/Dropbox'
data_path <- file.path(
dropbox,
"Rwanda Energy/EAQIP/datawork/MTF Data"
)
business <- sectionA2 %>%
filter(HI04 == 2) %>%
group_by(A26A) %>%
summarise(yes)
business <- sectionA2 %>%
filter(HI04 == 2) %>%
group_by(A26A) %>%
summarise(n = n())
View(business)
151/(151+3517)
pacman::p_load(tidyverse, dplyr, here, sf,
stringr, haven, lmtest, fixest, kableExtra,
ggplot2, readxl, writexl, janitor, randomizr,
stargazer, modelsummary, googlesheets4)
getwd()
# Import Data ----
dropbox <- 'C:/Users/wb614406/Dropbox'
data_path <- file.path(
dropbox,
"Rwanda Energy/EAQIP/datawork/MTF Data"
)
View(sectionC1)
#Mobile phones----
mobile_owners_summary <- sectionC1 %>%
filter(HI04 == 2 ) %>%
summarise(
count = sum(C172 > 0, na.rm = TRUE),
percentage = round(100 * count / total_households, 2)
)
View(mobile_owners_summary)
charingspending_summary <- sectionC1 %>%
filter(HI04 == 2 ) %>%
summarise(
mean = mean(C176, na.rm = TRUE),
sd   = sd(C176, na.rm = TRUE),
min  = min(C176, na.rm = TRUE),
max  = max(C176, na.rm = TRUE),
median = median(C176, na.rm = TRUE),  )
View(charingspending_summary)
mobile_charge_summary <- sectionC1 %>%
filter(HI04 == 2 ) %>%
summarise(
count = sum(C175 > 0, na.rm = TRUE),
percentage = round(100 * count / total_households, 2)
)
View(mobile_charge_summary)
main_source <- sectionC1 %>%
filter(HI04 == 2 ) %>%
mutate(C171 = as_factor(C171)) %>%
group_by(C171) %>%
summarise(
n = n()
) %>%
arrange(desc(n)) %>%
mutate(percentage = paste(round((n / sum(n)),4) * 100, "%"))
View(main_source)
fuel_spending <- sectionF2 %>%
filter(HI04 == 2 ) %>%
mutate(
F11 = as_factor(F11),  # F11 = fuel type
F14 = as.numeric(F14), # ensure F14 is numeric (days between purchases)
F15 = as.numeric(F15), # spending per purchase
spending_month = ifelse(F14 > 0, F15 * (30 / F14), NA_real_)
) %>%
filter(F12 == 1) %>%  # filter for fuels used for lighting
group_by(F11) %>%
summarise(
n = n(),
mean_spending_month = round(mean(spending_month, na.rm = TRUE), 2)
) %>%
arrange(desc(n)) %>%
mutate(
percentage = paste0(round((n / 5706) * 100, 2), "%")
)
View(fuel_spending)
fuel_spending <- sectionF2 %>%
filter(HI04 == 2 ) %>%
mutate(
F11 = as_factor(F11),  # F11 = fuel type
F14 = as.numeric(F14), # ensure F14 is numeric (days between purchases)
F15 = as.numeric(F15), # spending per purchase
spending_month = ifelse(F14 > 0, F15 * (30 / F14), NA_real_)
) %>%
filter(F12 == 1) %>%  # filter for fuels used for lighting
group_by(F11) %>%
summarise(
n = n(),
mean_spending_month = round(mean(spending_month, na.rm = TRUE), 2)
) %>%
arrange(desc(n)) %>%
mutate(
percentage = paste0(round((n / 5706) * 100, 2), "%")
)
biomass_spending <- sectionI %>%
filter(I02 %in% c("10", "13", "15")) %>%  # Select biomass fuels
mutate(
I02 = as_factor(I02),
frequency_month = case_when(
I13 == 1 ~ 30,
I13 == 2 ~ 4,
I13 == 3 ~ 8,
I13 == 4 ~ 1,
I13 == 7 ~ NA_real_,  # Optional: handle 'Other'
TRUE ~ NA_real_
)
) %>%
filter(I03 == 1) %>%   # Used for lighting
mutate(
total_amount = frequency_month * I16  # Replace I15 with your amount column
) %>%
group_by(HHID) %>%
summarise(
total_amount = sum(total_amount, na.rm = TRUE)
)
View(biomass_spending)
View(sectionC2)
View(sectionEF1)
View(sectionF1)
View(sectionF2)
View(sectionI)
lighting <- sectionB %>%
mutate(B02 = as_factor(B02)) %>%
group_by(B02) %>%
summarise(
n = n()
) %>%
arrange(desc(n)) %>%
mutate(percentage = paste(round((n / sum(n)),4) * 100, "%"))
pacman::p_load(tidyverse, dplyr, here, sf,
stringr, haven, lmtest, fixest, kableExtra,
ggplot2, readxl, writexl, janitor, randomizr,
stargazer, modelsummary, googlesheets4)
getwd()
fuel_use <- sectionI %>%
filter(HI04 == 2 ) %>%
mutate(I02 = as_factor(I02))
View(fuel_use)
fuel_use <- sectionI %>%
filter(HI04 == 2 ) %>%
mutate(I02 = as_factor(I02)) %>%
summarise(
candle_count = sum(str_detect(I02, regex("candle", ignore_case = TRUE)), na.rm = TRUE),
kerosene_count = sum(str_detect(I02, regex("kerosene", ignore_case = TRUE)), na.rm = TRUE),
biomass_count = sum(str_detect(
I02,
regex("wood purchased|wood collected|animal waste|crop residue|plant biomass|sawdust|biomass briquette|pellets|processed biomass|wood chips", ignore_case = TRUE)
), na.rm = TRUE)
)
fuel_use <- sectionI %>%
filter(HI04 == 2 ) %>%
mutate(I02 = as_factor(I02))
table(fuel_use$I02)
lighting <- sectionB %>%
filter(HI04 == 2 ) %>%
mutate(B02 = as_factor(B02)) %>%
group_by(B02) %>%
summarise(
n = n()
) %>%
arrange(desc(n)) %>%
mutate(percentage = paste(round((n / sum(n)),4) * 100, "%"))
View(lighting)
View(sectionMN)
lighting <- sectionB %>%
filter(HI04 == 2 ) %>%
mutate(B02 = as_factor(B02)) %>%
group_by(B02) %>%
summarise(
n = n()
) %>%
arrange(desc(n)) %>%
mutate(percentage = paste(round((n / sum(n)),4) * 100, "%"))
View(lighting)
cookstove_summary <- sectionG1 %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G03 = as_factor(G03)) %>%  # Apply labels from .dta if read with haven
group_by(G03) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
View(cookstove_summary)
cookstove_summary <- sectionG1 %>%
filter(HI04 == 2 ) %>%
filter(G26 == 1) %>%  # Only keep the main cookstove
mutate(G03 = as_factor(G03)) %>%  # Apply labels from .dta if read with haven
group_by(G03) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
# Summarize cooking time
cooking_time_summary <- sectionKL %>%
filter(HI04 == 2 ) %>%
mutate(
women = K2A + K2B,
men   = K2C + K2D
) %>%
summarise(
women_mean   = round(mean(women, na.rm = TRUE), 2),
women_sd     = round(sd(women, na.rm = TRUE), 2),
women_min    = min(women, na.rm = TRUE),
women_max    = max(women, na.rm = TRUE),
women_median = median(women, na.rm = TRUE),
men_mean     = round(mean(men, na.rm = TRUE), 2),
men_sd       = round(sd(men, na.rm = TRUE), 2),
men_min      = min(men, na.rm = TRUE),
men_max      = max(men, na.rm = TRUE),
men_median   = median(men, na.rm = TRUE)
)
View(cooking_time_summary)
secondary_cookstove_summary <- sectionG1 %>%
filter(HI04 == 2 ) %>%
filter(G26 != 1) %>%  # Only keep the main cookstove
mutate(G03 = as_factor(G03)) %>%  # Apply labels from .dta if read with haven
group_by(G03) %>%
summarise(n = n()) %>%
mutate(
percentage = round(100 * n / 5706, 2)
)
View(secondary_cookstove_summary)
