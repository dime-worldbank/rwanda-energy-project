summary(lv_22_check)
stargazer(
lv_22_check,
type = "html",
title = "Table 2: 2022 LV line and nightlights ",
out = "lv22_check.html")
ggplot(rwa_2011, aes(x = `2011`)) +
geom_histogram(fill = "lightblue", color = "black", bins = 30) +
labs(title = "Distribution of 2011", x = "2011 Values", y = "Frequency")
ggplot(rwa_2011, aes(x = `2011`)) +
geom_histogram(fill = "lightblue", color = "black", bins = 30, alpha = 0.7) +
geom_density(color = "red", size = 1) +  # Add a smooth line
labs(title = "Distribution of 2011", x = "2011 Values", y = "Frequency")
mean(rwa_2011$`2011`)
summary(quantile(rwa_2011$`2011`, 0.75))
quantile(rwa_2011$`2011`, 0.75)
ggplot(rwa_2022, aes(x = `2022`)) +
geom_histogram(fill = "lightblue", color = "black", bins = 30, alpha = 0.7) +
labs(title = "Distribution of 2022", x = "2011 Values", y = "Frequency")
mv_21_check <- lm(`2021` ~ connect22_mv + road, data = rwa_wide)
summary(mv_21_check)
stargazer(
mv_22_check,
type = "html",
title = "Table 4: 2022 MV line and 2021 harmonized nightlights ",
out = "mv21_check.html")
stargazer(
mv_21_check,
type = "html",
title = "Table 4: 2022 MV line and 2021 harmonized nightlights ",
out = "mv21_check.html")
rwa_wide.1 <- rwa_wide %>%
filter(connect11_mv != 1)
mv_21_check_fil <- lm(`2021` ~ connect22_mv + road, data = rwa_wide.1)
summary(mv_21_check_fil)
stargazer(
mv_22_check_fil,
type = "html",
title = "Table 5: 2022 MV line and 2021 nightlights ",
out = "mv22_check_fil.html")
stargazer(
mv_21_check_fil,
type = "html",
title = "Table 5: 2022 MV line and 2021 nightlights ",
out = "mv22_check_fil.html")
stargazer(
mv_21_check_fil,
type = "html",
title = "Table 5: 2022 MV line and 2021 nightlights ",
out = "mv21_check_fil.html")
rwa_wide.1 <- rwa_wide %>%
filter(connect11_mv == 0)
mv_21_check_fil <- lm(`2021` ~ connect22_mv + road, data = rwa_wide.1)
summary(mv_21_check_fil)
stargazer(
mv_21_check_fil,
type = "html",
title = "Table 5: 2022 MV line and 2021 nightlights ",
out = "mv21_check_fil.html")
summary(mv_21_check_fil)
summary(mv_21_check)
stargazer(
mv_21_check_fil,
type = "html",
title = "Table 5: 2022 MV line and 2021 nightlights filter 2011 connections ",
out = "mv21_check_fil.html")
stargazer(
mv_21_check_fil,
type = "html",
title = "Table 5: 2022 MV line and 2021 nightlights no 2011 connections ",
out = "mv21_check_fil.html")
View(rwa_road_join)
View(rwa_long)
rwa_long_did <- rwa_long %>%
filter( connect11_mv  == 0 & Year == c(2011:2021)) %>%
mutate(
treated = ifelse(connect22_mv== 1, 1, 0),
numYear = as.numeric(Year)-2011,
Year = as.numeric(Year)
)
didrwa <- lm(Value ~ numYear*treated + treated + numYear, data = rwa_long_did)
summary(didrwa)
stargazer(
didrwa,
type = "html",
title = "Table: Difference in differences(2022) 2011-2021",
out = "DiD2022mv.html")
View(rwa_long_did)
didrwa <- lm(Value ~ numYear*connect22_mv + connect22_mv + numYear, data = rwa_long_did)
summary(didrwa)
stargazer(
didrwa,
type = "html",
title = "Table: Difference in differences(2022) 2011-2021",
out = "DiD2022mv.html")
lm(`2021` ~ `2011`, data = rwa_wide.1)
did <- lm(`2021` ~ `2011`, data = rwa_wide.1)
summary(did)
did <- lm(`2021` ~ `2011` + connect22_mv, data = rwa_wide.1)
summary(did)
stargazer(
did,
type = "html",
title = "Table: Difference in differences",
out = "DiD2022mv.html")
did <- lm(`2021` ~ `2011` + connect22_mv + connect22_mv*`2011`, data = rwa_wide.1)
summary(did)
stargazer(
did,
type = "html",
title = "Table: Difference in differences",
out = "DiD2022mv.html")
did <- lm(`2021` ~ `2011` + connect22_mv + connect22_mv*`2011`, data = rwa_wide)
summary(did)
stargazer(
did,
type = "html",
title = "Table: Difference in differences",
out = "DiD2022mv.html")
View(rwa_long)
did <- lm( Value ~ connect22_mv + connect11_mv + connect11_mv*connect22_mv, data = rwa_long)
summary(did)
rwa_long_21 <- rwa_long %>%
filter(Year == "2021")
View(rwa_wide)
?pivot_longer()
did <- lm( `2021` ~ connect22_mv + connect11_mv + connect11_mv*connect22_mv, data = rwa_wide)
summary(did)
stargazer(
did,
type = "html",
title = "Table: Difference in differences",
out = "DiD2022mv.html")
View(rwa_long)
rwa_long_did <- rwa_long %>%
filter(Year >= 2011)
pacman::p_load(raster,exactextractr,dplyr, rgdal,here,ggplot2,sf,tidyr,readxl,writexl, stringr, stargazer)
getwd()
rwa_long_did <- rwa_long %>%
filter(Year >= 2011)
View(rwa_long_did)
View(rwa_wide)
rwa_long <- rwa_wide %>%
pivot_longer(
cols = matches("^(19|20)"),
names_to = "Year",
values_to = "Value"
)
rwa_long_did <- rwa_long %>%
filter(Year >= 2011) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
did <- lm(Value ~ connect11_mv + year_2021*connect11_mv, data = rwa_long_did)
summary(did)
rwa_long_did <- rwa_long %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
did <- lm(Value ~ connect11_mv + year_2021*connect11_mv, data = rwa_long_did)
summary(did)
rwa_long_did <- rwa_long %>%
filter(Year >= 2011) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
did <- lm(Value ~ connect11_mv + year_2021*connect11_mv, data = rwa_long_did)
summary(did)
stargazer(
didrwa,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
did,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
View(viirs)
rwa_long_did_pre <- rwa_long %>%
filter(Year < 2011) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
did_pre <- lm(Value ~ connect11_mv, data = rwa_long_did_pre)
summary(did_pre)
?stargazer()
stargazer(
did_pre,
did,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
model <- list(
pre_trend = did_pre,
post_2011 = did
)
stargazer(
did_pre,
did,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
model,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
model,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
model <- list(
"pre_2011_trend" = did_pre,
"post_2011" = did
)
stargazer(
model,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
model <- list(
"pre_2011_trend" = did_pre,
"post_2011" = did
)
stargazer(
model,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
pre_trend <- lm(Value ~ connect11_mv, data = rwa_long_did_pre)
after_2011 <- lm(Value ~ connect11_mv + year_2021*connect11_mv, data = rwa_long_did)
summary(after_2011)
stargazer(
after_2011,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
pre_trend <- lm(Value ~ connect11_mv, data = rwa_long_did_pre)
stargazer(
pre_trend, after_2011,
object.names = TRUE,
model.numbers = FALSE,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
object.names = TRUE,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
column.labels = c("pre_2011_trend", "post_2011"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
colnames = c("pre_2011_trend", "post_2011"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
colnames = TRUE,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
object_names = TRUE,
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
column.labels = c("pre, "post""),
column.labels = c("pre", "post),
stargazer(
pre_trend, after_2011,
column.labels = c("pre", "post"),
stargazer(
pre_trend, after_2011,
column.labels = c("pre", "post"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
column.labels = c("pre_2011_trend", "post_2011"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
column.labels = c("pre_2011_trend", "post_2011"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
column.labels = c("pre_trend", "post_connection"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
long_2022 <- rwa_long %>%
filter(connect11_mv = 0) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
long_2022 <- rwa_long %>%
filter(connect11_mv == 0) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
View(long_2022)
mv_2022 <- lm(Value ~ connect22_mv + year_2021 + year_2021*connect22_mv, data = long_2022)
summary(mv_2022)
long_2022 <- rwa_long %>%
filter(connect11_mv == 0 & Year >= 2021) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
mv_2022 <- lm(Value ~ connect22_mv + year_2021 + year_2021*connect22_mv, data = long_2022)
summary(mv_2022)
long_2022 <- rwa_long %>%
filter(connect11_mv == 0 & Year >= 2011) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
mv_2022 <- lm(Value ~ connect22_mv + year_2021 + year_2021*connect22_mv, data = long_2022)
summary(mv_2022)
lv_2022 <- lm(Value ~ connect22_lv + year_2021 + year_2021*connect22_lv, data = long_2022)
summary(lv_2022)
stargazer(
pre_trend, after_2011,
column.labels = c("pre trend", "post connection"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
pre_trend, after_2011,
column.labels = c("pre 2011 trend", "post 2011 connection"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2011.html")
stargazer(
mv_2022, lv_2022,
column.labels = c("mv line", "lv line"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2022.html")
long_2022 <- rwa_long %>%
filter(Year >= 2011) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
pacman::p_load(raster,exactextractr,dplyr, rgdal,here,ggplot2,sf,tidyr,readxl,writexl, stringr, stargazer)
getwd()
#ReadDropbox----
if (Sys.getenv("USERNAME") == "wb614406"){
DROPBOX <- file.path("C:/Users/wb614406/Dropbox")
}
data_path <- file.path(
DROPBOX, "Rwanda Energy/datawork/Historical data"
)
long_2022 <- rwa_long %>%
filter(Year >= 2011) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
##mv----
mv_2022 <- lm(Value ~ connect22_mv + year_2021 + year_2021*connect22_mv, data = long_2022)
summary(mv_2022)
##lv----
lv_2022 <- lm(Value ~ connect22_lv + year_2021 + year_2021*connect22_lv, data = long_2022)
summary(lv_2022)
stargazer(
mv_2022, lv_2022,
column.labels = c("mv line", "lv line"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2022_notfilter2011.html")
if (Sys.getenv("USERNAME") == "wb614406"){
DROPBOX <- file.path("C:/Users/wb614406/Dropbox")
}
data_path <- file.path(
DROPBOX, "Rwanda Energy/datawork/Historical data"
)
rwa_wide <- read_xlsx(path = file.path(data_path, "ntl_wide_92_21(connect11&22+rd).xlsx"))
#Select for 2011
rwa_2011 <- rwa_wide %>%
select(Village_ID, connect11_mv, `2011` , road) %>%
mutate(connect11_mv = as.factor(connect11_mv))
# mutate(`2011` = ifelse(`2011` > quantile(`2011`, 0.99), quantile(`2011`, 0.99), `2011`)) %>%
# filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
#
mv_11_check <- lm(`2011` ~ connect11_mv + road, data = rwa_2011)
summary(mv_11_check)
stargazer(
mv_11_check,
type = "html",
title = "Table 1: 2011 MV line and 2011 nightlights",
out = "mv11_check.html")
mv_21_check <- lm(`2021` ~ connect22_mv + road, data = rwa_wide)
summary(mv_21_check)
stargazer(
mv_21_check,
type = "html",
title = "Table 2: 2022 MV line and 2021 nightlights  ",
out = "mv21_mvcheck.html")
lv_21_check <- lm(`2021` ~ connect22_lv + road, data = rwa_wide)
summary(lv_21_check)
stargazer(
mv_21_check,
type = "html",
title = "Table 3: 2022 LV line and 2021 nightlights  ",
out = "mv21_lvcheck.html")
rwa_wide.1 <- rwa_wide %>%
filter(connect11_mv == 0)
mv_21_check_fil <- lm(`2021` ~ connect22_mv + road, data = rwa_wide.1)
summary(mv_21_check_fil)
stargazer(
mv_21_check_fil,
type = "html",
title = "Table 5: 2022 MV line and 2021 nightlights dropping 2011 connections ",
out = "mv21_check_fil.html")
stargazer(
mv_11_check,
mv_21_check,
mv_21_check_fil,
lv_21_check,
column.labels = c("MV_line", "MV_line",  "MV_filtering 2011 connections", "LV_line"),
type = "html",
title = "Table 1: 2011 MV line and 2011 nightlights",
out = "mv11_check.html"
)
stargazer(
mv_11_check,
mv_21_check,
mv_21_check_fil,
lv_21_check,
column.labels = c("MV line", "MV_ line",  "MV filtering 2011 connections", "LV line"),
type = "html",
title = "Table 1: 2011 MV line and 2011 nightlights",
out = "mv11_check.html"
)
rwa_wide.1 <- rwa_wide %>%
filter(connect11_mv == 0) %>%
rename(`2021_ntl_value`)
rwa_wide.1 <- rwa_wide %>%
filter(connect11_mv == 0) %>%
rename(`2021_ntl_value` = 2021)
rwa_2022 <- rwa_wide %>%
rename(`2021_ntl_value` = 2021)
mv_21_check <- lm(`2021_ntl_value` ~ connect22_mv + road, data = rwa_2022)
lv_21_check <- lm(`2021_ntl_value` ~ connect22_lv + road, data = rwa_2022)
rwa_2022 <- rwa_wide %>%
rename(`2021_ntl_value` = 2021)
rwa_2022 <- rwa_wide %>%
rename(`2021_ntl_value` = `2021`)
mv_21_check <- lm(`2021_ntl_value` ~ connect22_mv + road, data = rwa_2022)
lv_21_check <- lm(`2021_ntl_value` ~ connect22_lv + road, data = rwa_2022)
rwa_wide.1 <- rwa_wide %>%
filter(connect11_mv == 0) %>%
rename(`2021_ntl_value` = `2021`)
mv_21_check_fil <- lm(`2021_ntl_value` ~ connect22_mv + road, data = rwa_wide.1)
#Select for 2011
rwa_2011 <- rwa_wide %>%
select(Village_ID, connect11_mv, `2011` , road) %>%
mutate(connect11_mv = as.factor(connect11_mv)) %>%
rename(`2011_ntl_value`)
#Select for 2011
rwa_2011 <- rwa_wide %>%
select(Village_ID, connect11_mv, `2011` , road) %>%
mutate(connect11_mv = as.factor(connect11_mv)) %>%
rename(`2011_ntl_value` = `2011`)
mv_11_check <- lm(`2011_ntl_value` ~ connect11_mv + road, data = rwa_2011)
stargazer(
mv_11_check,
mv_21_check,
mv_21_check_fil,
lv_21_check,
column.labels = c("MV line", "MV_ line",  "MV filtering 2011 connections", "LV line"),
type = "html",
title = "Table 1: MV line and nightlights",
out = "grid_check.html"
)
stargazer(
mv_11_check,
mv_21_check,
mv_21_check_fil,
lv_21_check,
column.labels = c("2011 MV line", "2022 MV line",  "2022 MV filtering 2011 connections", "2022 LV line"),
type = "html",
title = "Table 1: MV line and nightlights",
out = "grid_check.html"
)
long_2022 <- rwa_long %>%
# filter(Year >= 2011) %>%
mutate(year_2021 = ifelse(Year == 2021, 1, 0))
##mv----
mv_2022 <- lm(Value ~ connect22_mv + year_2021 + connect11_mv + year_2021*connect22_mv, data = long_2022)
summary(mv_2022)
##lv----
lv_2022 <- lm(Value ~ connect22_lv + year_2021 + connect11_mv + year_2021*connect22_lv, data = long_2022)
summary(lv_2022)
stargazer(
mv_2022, lv_2022,
column.labels = c("mv line", "lv line"),
type = "html",
title = "Table: Difference in differences",
out = "DiD2022_notfilter2011.html")
stargazer(
mv_2022,
type = "html",
title = "Table: Difference in differences (2022 MV line)",
out = "DiD22MV_notfilter2011.html")
stargazer(
mv_2022,
type = "html",
title = "Table: Difference in differences (2022 LV line)",
out = "DiD22LV_notfilter2011.html")
stargazer(
lv_2022,
type = "html",
title = "Table: Difference in differences (2022 LV line)",
out = "DiD22LV_notfilter2011.html")
View(rwa_long)
