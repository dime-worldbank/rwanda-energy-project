rwa_event_long <- left_join(rwa_event_long)
rwa_event_long <- left_join(rwa_event_long, rwa_road_join by = c("Village_ID"))
rwa_event_long <- left_join(rwa_event_long, rwa_road_join, by = c("Village_ID"))
rwa_event_long <- rwa_event_long %>%
mutate(road = ifelse(is.na(road), 0, road))
View(cohort_means)
###2011----
cohort_means <- rwa_event_long %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year, road) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connection_time), group = interaction(connection_time, road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = interaction(connection_time), group = interaction(connection_time, road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-no NR",
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2022-no NR"
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2022-NR"
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-no NR",
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2022-no NR",
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2022-NR"
))
-ion_time, road))) +
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR",
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-no NR",
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2022-NR",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2022-no NR"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR1",
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-NR0",
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2011-NR1",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2011-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
View(rwa_event_long)
after_2011 <- rwa_event_long %>%
filter(connect11 != 1)
after_2011 <- after_2011 %>%
mutate(
connection_time = ifelse(connect22 == 1, "connected 2022", "not connected 2022")
)
cohort_means<- after_2011 %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year, road) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR1",
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-NR0",
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2011-NR1",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2011-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2022") & road == 1 ~ "connected 2011-NR1",
connection_time %in% c("connected 2022") & road == 0 ~ "connected 2011-NR0",
connection_time %in% c("not connected 2022")& road == 1 ~ "not connected 2011-NR1",
connection_time %in% c("not connected 2022")& road == 0 ~ "not connected 2011-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2022") & road == 1 ~ "connected 2022-NR1",
connection_time %in% c("connected 2022") & road == 0 ~ "connected 2022-NR0",
connection_time %in% c("not connected 2022")& road == 1 ~ "not connected 2022-NR1",
connection_time %in% c("not connected 2022")& road == 0 ~ "not connected 2022-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line(size = 1) +  # Set a default size for all lines
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
scale_size_manual(values = c("connected 2022-NR0" = 1.5, "not connected 2022-NR0" = 1.5)) +  # Adjust size for specific groups
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line(size = 0.5) +  # Set a default size for all lines
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
scale_size_manual(values = c("connected 2022-NR0" = 1.5, "not connected 2022-NR0" = 1.5)) +  # Adjust size for specific groups
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
geom_point() +
geom_line(size = 0.5) +  # Set a default size for all lines
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point() +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point() +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point() +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point() +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = connection_time)
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point() +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = connect_road)
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point() +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(color = connect_road) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(color = "connect_road") +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "solid", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
cohort_means <- rwa_event_long %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year, road) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR1",
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-NR0",
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2011-NR1",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2011-NR0"
))
# ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connect_road), group = as.factor(connect_road))) +
#   geom_point() +
#   geom_line() +
#   labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
#   theme_classic() +
#   geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
#   labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
#
#
#
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "solid", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2011)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
existing_LV22 <- st_read(dsn = file.path(data_path, "Existing Electrical Network_2022/ExisitngLVLine.shp"))
existing_LV22 <- st_read(dsn = file.path(data_path, "Existing Electrical Network_2022/Exisitng_LVLine.shp"))
existing_LV22 <- st_read(dsn = file.path("C:/Users/wb614406/Dropbox/Rwanda Energy/datawork/Historical data/Existing Electrical Network_2022/Existing_LVLine.shp"))
existing_LV22 <- st_transform(existing_LV22, crs = st_crs(rwa_sp))
LV_villages <- st_intersection(existing_LV22, rwa_sp)
LV_villages <- LV_villages %>%
distinct(Village_ID, .keep_all = TRUE)
write_xlsx(LV_villages, path = file.path("C:/Users/wb614406/Dropbox/Rwanda Energy/datawork/Historical data/Rwanda Villages with Existing LV_2022.xlsx"))
LV_villages <- LV_villages %>%
distinct(Village_ID, .keep_all = TRUE) %>%
select(Village_ID, Name, Cell, Sector, Distrcit, Province)
LV_villages <- LV_villages %>%
distinct(Village_ID, .keep_all = TRUE) %>%
select(Village_ID, Name, Cell, Sector, Distrcit, Province)
LV_villages <- LV_villages %>%
distinct(Village_ID, .keep_all = TRUE) %>%
select(Village_ID, Name, Cell, Sector, District, Province)
write_xlsx(LV_villages, path = file.path("C:/Users/wb614406/Dropbox/Rwanda Energy/datawork/Historical data/Rwanda Villages with Existing LV_2022.xlsx"))
lv_join <- LV_villages %>%
select(Village_ID) %>%
mutate(connect22_lv = 1)
View(lv_join)
lv_join <- LV_villages %>%
select(Village_ID) %>%
mutate(connect22_lv = 1) %>%
st_drop_geometry
lv_join <- LV_villages %>%
select(Village_ID) %>%
mutate(connect22_lv = 1) %>%
st_drop_geometry()
rwa_event_long <- left(rwa_event_long, lv_join by = c("Village_ID"))
rwa_event_long <- left(rwa_event_long, lv_join, by = c("Village_ID"))
rwa_event_long <- left_join(rwa_event_long, lv_join, by = c("Village_ID"))
rwa_long <- rwa_event_long %>%
rename(connect22_mv = connect22,
connect11_mv = connect11,
connect22_lv = connect22_lv)
View(rwa_long)
rwa_long <- rwa_event_long %>%
rename(connect22_mv = connect22,
connect11_mv = connect11,
connect22_lv = connect22_lv) %>%
select(everything(), connection_time, connection_road)
rwa_long <- rwa_event_long %>%
rename(connect22_mv = connect22,
connect11_mv = connect11,
connect22_lv = connect22_lv) %>%
select(everything(), connection_time, connect_road)
rwa_long <- rwa_event_long %>%
rename(connect22_mv = connect22,
connect11_mv = connect11,
connect22_lv = connect22_lv) %>%
select(everything(), connection_time)
rwa_long <- rwa_event_long %>%
rename(connect22_mv = connect22,
connect11_mv = connect11,
connect22_lv = connect22_lv) %>%
select(Village_ID,Province,District, Sector, Cell, Name, Year, Value, starts_with(connect), road, connection_time)
rwa_long <- rwa_event_long %>%
rename(connect22_mv = connect22,
connect11_mv = connect11,
connect22_lv = connect22_lv) %>%
select(Village_ID,Province,District, Sector, Cell, Name, Year, Value, starts_with("connect"), road, connection_time)
rwa_long <- rwa_long[, Village_ID, Province,District, Sector, Cell, Name, Year, Value, starts_with("connect"), road, connection_time]
rwa_long <- rwa_long[, "Village_ID"," Province","District", "Sector", "Cell"," Name", "Year", "Value", starts_with("connect"), "road"", connection_time"]
rwa_long <- rwa_long[, "Village_ID"," Province","District", "Sector", "Cell"," Name", "Year", "Value", starts_with("connect"), "road", "connection_time"]
after_2011 <- rwa_long %>%
filter(connect11 != 1)
after_2011 <- rwa_long %>%
filter(connect11_mv != 1)
after_2011 <- after_2011 %>%
mutate(
connection_time = ifelse(connect22_lv == 1, "connected 2022", "not connected 2022")
)
cohort_means<- after_2011 %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year, road) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2022") & road == 1 ~ "connected 2022-NR1",
connection_time %in% c("connected 2022") & road == 0 ~ "connected 2022-NR0",
connection_time %in% c("not connected 2022")& road == 1 ~ "not connected 2022-NR1",
connection_time %in% c("not connected 2022")& road == 0 ~ "not connected 2022-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "solid", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
rwa_long <- rwa_long %>%
mutate(connect22_lv = ifelse(is.na(connect22_lv), 0, connect22_lv))
after_2011 <- rwa_long %>%
filter(connect11_mv != 1)
after_2011 <- after_2011 %>%
mutate(
connection_time = ifelse(connect22_lv == 1, "connected 2022", "not connected 2022")
)
cohort_means<- after_2011 %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year, road) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2022") & road == 1 ~ "connected 2022-NR1",
connection_time %in% c("connected 2022") & road == 0 ~ "connected 2022-NR0",
connection_time %in% c("not connected 2022")& road == 1 ~ "not connected 2022-NR1",
connection_time %in% c("not connected 2022")& road == 0 ~ "not connected 2022-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "solid", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
scale_color_manual(values = c("blue", "blue", "black", "black"))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
scale_color_manual(values = c("blue", "blue", "black", "black")) +
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "solid", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2022)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
at_2011 <- rwa_long %>%
mutate(
connection_time = ifelse(connect11_mv == 1, "connected 2011", "not connected 2011")
)
cohort_means <- at_2011 %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year, road) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR1",
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-NR0",
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2011-NR1",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2011-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
scale_color_manual(values = c("blue", "blue", "black", "black")) +
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "solid", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2011)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
at_2011 <- rwa_long %>%
mutate(
connection_time = ifelse(connect11_mv == 1, "connected 2011", "not connected 2011")
)
cohort_means <- at_2011 %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year, road) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
cohort_means <- cohort_means %>%
mutate(connect_road = case_when(
connection_time %in% c("connected 2011") & road == 1 ~ "connected 2011-NR1",
connection_time %in% c("connected 2011") & road == 0 ~ "connected 2011-NR0",
connection_time %in% c("not connected 2011")& road == 1 ~ "not connected 2011-NR1",
connection_time %in% c("not connected 2011")& road == 0 ~ "not connected 2011-NR0"
))
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean,group = as.factor(connect_road))) +
geom_point(aes(color = connect_road)) +
geom_line(aes(linetype = connect_road, color = connect_road)) +
scale_linetype_manual(values = c("solid", "dashed", "solid", "dashed" )) +  # Adjust size for specific groups
scale_color_manual(values = c("blue", "blue", "black", "black")) +
# Set a default size for all lines
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "solid", size = 0.5, color = "red") +
labs(title = "Event Study Time Series Rwanda 1992-2020 (outside Kigali not connected in 2011)") +
labs(x = "Year", y = "Avg Nightlight Value", color = "connect_road")
View(after_2011)
# calculate the means
cohort_means <- after_2011 %>%
group_by(connection_time, Year) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connection_time), group = as.factor(connection_time))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(not connected in 2011)")
cohort_means <- after_2011 %>%
filter(!(District %in% c("Gasabo", "Kicukiro", "Nyarugenge"))) %>%
group_by(connection_time, Year) %>%
summarize(cohort_mean = mean(Value, na.rm = TRUE))
cohort_means <- cohort_means %>%
ungroup()
ggplot(data = cohort_means, aes(x = Year, y = cohort_mean, colour = as.factor(connection_time), group = as.factor(connection_time))) +
geom_point() +
geom_line() +
labs(x = "Year", y = "Avg Nightlight Value", color = "connection_time") +
theme_classic() +
geom_vline(xintercept = c(17,24), alpha = 0.3, linetype = "dashed", size = 0.5, color = "red")+
labs(title = "Event Study Time Series Rwanda 1992- 2020(outside Kigali not connected in 2011)")
View(rwa_long)
write_xlsx(rwanda_long, path = file.path("C:/Users/wb614406/Dropbox/Rwanda Energy/datawork/Historical data/ntl_long_92_20(connect11&22+rd).xlsx"))
write_xlsx(rwa_long, path = file.path("C:/Users/wb614406/Dropbox/Rwanda Energy/datawork/Historical data/ntl_long_92_20(connect11&22+rd).xlsx"))
write_xlsx(rwa_long, path = file.path("C:/Users/wb614406/Dropbox/Rwanda Energy/datawork/Historical data/ntl_long_92_20.xlsx"))
View(rwa_road)
write_xlsx(rwa_road, path = file.path("C:/Users/wb614406/Dropbox/Rwanda Energy/datawork/Historical data/Rwanda Villages with National Road.xlsx"))
